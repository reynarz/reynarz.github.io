<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reynarz | P</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/carousel.css">
    <link rel="stylesheet" href="css/grid.css">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dosis&family=Raleway&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+HK:wght@200..900&family=Sen:wght@400..800&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.png">

</head>
<body>

<div class="slide-box">
    <button id="closeBtn" class="close-btn">Ã—</button>
  <iframe id="contentFrame" src="" style="width: 100%; height: 100%; border: none;"></iframe>
</div>
<style>

.slide-box {
    position: fixed;
    top: 0;
    right: -100%; /* Start fully off-screen to the right */
    width: calc(100% - 300px); /* Leave space for the 300px sidebar */
    height: 100vh;
    /*background-color: #0a0a0a;*/
    background-color: black;
    transition: right 0.5s ease;
    z-index: 9999;
}
@media (max-width: 1024px) {
  .slide-box {
    width: 100%; /* Take full width on mobile */
  }
}
.slide-box.show {
    right: 0; /* Slide into position */
}

.slide-box iframe {
  width: 100%;
  height: 100%;
  border: none;
  opacity: 1;
  transition: opacity 0.6s ease;
}

.slide-box iframe.fade-out {
  opacity: 0;
}

.close-btn {
  position: absolute;
  top: 10px;
  left: 30px;
  background: transparent;
  border: none;
  font-size: 60px;
  color: white;
  cursor: pointer;
  z-index: 10001;
  transform: rotate(0deg);
  transition: transform 0.5s ease-out, color 0.5s ease;
  padding: 20px;
}

.close-btn:hover {
  color: gray;
  /*transform: rotate(90deg);*/
}
</style>

    <div class="container">

  <div class="mobile-header">
<div class="mobile-header-top">
    <div class="home-button">
      <a href="#">REYNARZ</a>
    </div>
    <div class="hamburger-container">
      <button class="hamburger" onclick="toggleMobileMenu()">â˜°</button>
    </div>
  </div>
  <div id="mobile-menu" class="mobile-menu">
    <a href="#" data-file="resume.html"><i class="fas fa-file-alt"></i>RESUMe</a>
    <a href="#" data-file="coverletter.html"><i class="fa-solid fa-envelope"></i>COVER LETTER</a>
  <hr class="sidebar-divider">
    <a href="https://www.linkedin.com/in/reynardoperez" target="_blank"><i class="fa-brands fa-linkedin-in"></i>LinkedIn</a>
    <a href="https://github.com/reynarzz" target="_blank"><i class="fa-solid fa-code-branch"></i>GitHub</a>
    <a href="https://www.youtube.com/channel/UCYxGHl-M49FFuR5YyndAYgw" target="_blank"><i class="fa-brands fa-youtube"></i>Youtube</a>

  </div>
</div>


        <!-- ðŸ”´ Sidebar -->
        <aside class="sidebar">
    <div class="profile-section">
        <img src="assets/images/profile.png" alt="Profile Picture" class="profile-pic">
        <h2 class="name">Reynardo PÃ©rez</h2>
    </div>

   <div class="sidebar-links">
  <a href="#" data-file="resume.html"><i class="fas fa-file-alt"></i>RESUMe</a>
  <a href="#" data-file="coverletter.html"><i class="fa-solid fa-envelope"></i>COVER LETTER</a>
  <hr class="sidebar-divider">

    <div class="social-buttons">
    <a href="https://www.linkedin.com/in/reynardoperez" target="_blank" class="social-btn"><i class="fa-brands fa-linkedin-in"></i>LinkedIn</a>
    <a href="https://github.com/reynarzz" target="_blank" class="social-btn"><i class="fa-solid fa-code-branch"></i>GitHub</a>
    <a href="https://www.youtube.com/channel/UCYxGHl-M49FFuR5YyndAYgw" target="_blank" class="social-btn"><i class="fa-brands fa-youtube"></i>Youtube</a>
  </div>
</div>

    <div class="intro">
  <strong>HELLO, WELCOME!</strong>
  <p class="intro-text">
    My name is Reynardo Perez (Reynarz) and Iâ€™m a game programmer! Here you can see some of my personal projects.
  </p>
</div>

    <div class="social-icons">
       <!--<a href="https://github.com/reynarzz" target="_blank" rel="noopener noreferrer"><i class="fa fa-github-square" aria-hidden="true"></i></a>
            <a href="https://www.linkedin.com/in/reynardoperez" target="_blank" rel="noopener noreferrer"><i class="fa fa-linkedin-square" aria-hidden="true"></i></a>
            <a href="https://www.youtube.com/channel/UCYxGHl-M49FFuR5YyndAYgw" target="_blank" rel="noopener noreferrer"><i class="fa fa-youtube-square" aria-hidden="true"></i></a>
            <a href="https://twitter.com/_reynarz" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter-square" aria-hidden="true"></i></a>
           --> 
    </div>
</aside>

        <!-- ðŸŸ¦ Main Content Area -->
        <main class="main-content">
            <!-- ðŸŸ¡ Top Nav -->
      
            <!-- Video section (placeholder) -->
            <section class="video-section">
                <div class="video-carousel">
                    <div class="carousel-track">

                      <div class="video-wrapper" data-file="broken-path-explore.html" data-button="View More">
                      <video playsinline webkit-playsinline muted class="carousel-video active" src="assets/videos/brokenPath.mp4" autoplay muted loop></video>
                      <div class="video-overlay"></div>
                      <div class="video-gradient-overlay"></div>
                      <div class="video-text title">Broken Path</div>
                      <div class="video-text subtitle">My Pixel Art video game being made in Unity3D.</div>
                      </div>

                       <div class="video-wrapper" data-file="shred-engine-explore.html" data-button="View More">
                      <video playsinline webkit-playsinline muted class="carousel-video" src="assets/videos/engineView.mp4" autoplay muted loop></video>
                      <div class="video-overlay"></div>
                      <div class="video-gradient-overlay"></div>
                      <div class="video-text title">SHRED ENGINE</div>
                      <div class="video-text subtitle">My custom 3D/2D game engine made with C++, Jolt physics, Box2D, and own renderer. 
                        </div>
                    </div>

                    <div class="video-wrapper">
                      <video playsinline webkit-playsinline muted class="carousel-video" src="video2.mp4" autoplay muted loop></video>
                      <div class="video-overlay"></div>
                       <div class="video-gradient-overlay"></div>
                      <div class="video-text title">Video2</div>
                      <div class="video-text subtitle">Subtitle for video 2</div>
                    </div>

                    <div class="video-wrapper">
                      <video playsinline webkit-playsinline muted class="carousel-video" src="video3.mp4" autoplay muted loop></video>
                      <div class="video-overlay"></div>
                      
                       <div class="video-gradient-overlay"></div>
                      <div class="video-text title">Video3</div>
                      <div class="video-text subtitle">Subtitle for video 3</div>
                    </div>
                    </div>
                   <button class="carousel-arrow left">
  <!-- Left Arrow -->
  <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="12" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="15 18 9 12 15 6" />
  </svg>
</button>

<button class="carousel-arrow right">
  <!-- Right Arrow -->
  <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="9 6 15 12 9 18" />
  </svg>
</button>
             </div>

             <!-- <header class="top-nav">
        <div class="home-button">
            <a href="#">REYNARZ</a>
        </div>-->
    </header>
   <footer class="video-footer-text">
    <div class="video-title"></div>
    <div class="video-subtitle"></div>
    <a href="#" class="footer-button" target="_blank" rel="noopener noreferrer" data-file="broken-path-explore.html">
    View more
  </a>
    </footer>
            </section>
            <section class="grid-section">
<div class="grid-container">
  <a href="#" class="grid-item" data-file="broken-path-explore.html">
    <img src="assets/images/01-01.jpg" alt="Image 1" loading="eager"/>
    <div class="overlay">
      <h3 class="title">BROKEN PATH</h3>
      <p class="hashtags">#Unity3D #Game</p>
    </div>
  </a>
  <a href="#" class="grid-item" data-file="shred-engine-explore.html">
    <img src="assets/images/engine5.png" alt="Image 2" loading="eager"/>
    <div class="overlay">
      <h3 class="title">Shred Engine</h3>
      <p class="hashtags">#Engine #C++ #Jolt #Renderer</p>
    </div>
  </a>
  <a href="#" class="grid-item">
    <img src="assets/images/02-01.jpg" alt="Image 3" loading="eager"/>
    <div class="overlay">
      <h3 class="title">Mino Tool</h3>
      <p class="hashtags">#OpenGL #CSharp #DearImGui</p>
    </div>
  </a>
  <a href="#" class="grid-item">
    <img src="assets/images/04-01.png" alt="Image 4" loading="eager"/>
     <div class="overlay">
      <h3 class="title">Navecita</h3>
      <p class="hashtags">#C++ #OpenGL</p>
    </div>
  </a>
  <a href="#" class="grid-item">
    <img src="assets/images/sh3dpic.jpg" alt="Image 5" loading="eager"/>
    <div class="overlay">
      <h3 class="title">Shder3D</h3>
      <p class="hashtags">#Kotlin #OpenGLES #Editor</p>
    </div>
  </a>
  <a href="#" class="grid-item">
    <img src="assets/images/03-01.jpg" alt="Image 6" loading="eager"/>
      <div class="overlay">
      <h3 class="title">Minity</h3>
      <p class="hashtags">#Renderer-In-Engine #Unity3D #OpenGL</p>
    </div>
  </a>
  <a href="#" class="grid-item">
    <img src="assets/images/05-01.png" alt="Image 7" loading="eager"/>
    <div class="overlay">
      <h3 class="title">U Talk</h3>
      <p class="hashtags">#Unity3D #Asset #Tool</p>
    </div>
  </a>
 <!-- <a href="#" class="grid-item">
    <img src="assets/images/03-01.png" alt="Image 6" />
  </a>-->
</div>
</section>
        </main>
        
    </div>

    <script>


const videos = document.querySelectorAll(".carousel-video");
let current = 0;
let interval = setInterval(nextVideo, 12000);

const footer = document.querySelector('.video-footer-text');
const titleEl = footer.querySelector('.video-title');
const subtitleEl = footer.querySelector('.video-subtitle');
const buttonEl = footer.querySelector('.footer-button');

let fadeTimeouts = [];

function clearFadeTimeouts() {
    fadeTimeouts.forEach(t => clearTimeout(t));
    fadeTimeouts = [];
}

function fadeOutTexts(callback) {
    titleEl.classList.remove('visible');
    subtitleEl.classList.remove('visible');
    buttonEl.classList.remove('visible');
    buttonEl.style.pointerEvents = 'none';

    // Wait for fade out transition duration (0.5s)
    fadeTimeouts.push(setTimeout(() => {
        if (callback) callback();
    }, 500));
}

function fadeInTexts(title, subtitle, vidWrapper, file) {
    titleEl.textContent = title;
    subtitleEl.textContent = subtitle;

    // Fade in title after 1 second delay
    fadeTimeouts.push(setTimeout(() => {
        titleEl.classList.add('visible');
    }, 1000));

    // Fade in subtitle 600ms after title fade in starts
    fadeTimeouts.push(setTimeout(() => {
        subtitleEl.classList.add('visible');
    }, 1600));


     // Fade in button 600ms after title fade in starts
    fadeTimeouts.push(setTimeout(() => {
            buttonEl.classList.add('visible');

   const buttonText = vidWrapper.getAttribute('data-button');


    if (buttonText && buttonText.trim().toLowerCase() !== 'none') {
        buttonEl.textContent = buttonText;
        buttonEl.setAttribute('data-file', file);
        buttonEl.style.pointerEvents = 'auto';
        buttonEl.style.backgroundColor = 'white';
        buttonEl.style.color = 'black';
        buttonEl.style.border = '1px solid #ccc';
    } else {
        buttonEl.textContent = 'Coming soon';
        buttonEl.removeAttribute('data-file');
        buttonEl.style.pointerEvents = 'none';
        buttonEl.style.backgroundColor = 'transparent';
        buttonEl.style.color = 'white';
        buttonEl.style.border = '1px solid white';
    }

    }, 2300));


}

function updateFooterText(video) {
    clearFadeTimeouts();

    const wrapper = video.closest('.video-wrapper');
    const title = wrapper.querySelector('.video-text.title').textContent;
    const subtitle = wrapper.querySelector('.video-text.subtitle').textContent;
    const file = wrapper.getAttribute('data-file');

    fadeOutTexts(() => {
        fadeInTexts(title, subtitle, wrapper, file);
    });

    if (file) 
    {
        buttonEl.setAttribute('data-file', file);
    } 
    else 
    {
        buttonEl.removeAttribute('data-file');
    }
}


function nextVideo() {
    videos[current].classList.remove("active");
    current = (current + 1) % videos.length;
    videos[current].classList.add("active");
    videos[current].currentTime = 0;  // reset to start
    videos[current].play();

    updateFooterText(videos[current]);
}

function prevVideo() {
    videos[current].classList.remove("active");
    current = (current - 1 + videos.length) % videos.length;
    videos[current].classList.add("active");
    videos[current].currentTime = 0;  // reset to start
    videos[current].play();

    updateFooterText(videos[current]);
}

document.querySelector(".carousel-arrow.right").addEventListener("click", () => {
    clearInterval(interval);
    nextVideo();
    interval = setInterval(nextVideo, 12000);
});

document.querySelector(".carousel-arrow.left").addEventListener("click", () => {
    clearInterval(interval);
    prevVideo();
    interval = setInterval(nextVideo, 12000);
});

document.addEventListener('DOMContentLoaded', () => {
    const sidebar = document.querySelector('.sidebar');
    const mainContent = document.querySelector('.main-content');
    const activeVideo = document.querySelector('.carousel-video.active');
    if (activeVideo) updateFooterText(activeVideo);

    sidebar.addEventListener('wheel', (e) => {
        e.preventDefault();
        mainContent.scrollTop += e.deltaY;
    }, { passive: false });

    const nav = document.querySelector(".top-nav");
    const scrollTarget = document.querySelector(".main-content");

    scrollTarget.addEventListener("scroll", function () {
        const scrollThreshold = 100;
        if (scrollTarget.scrollTop > scrollThreshold) {
            nav.classList.add("scrolled");
        } else {
            nav.classList.remove("scrolled");
        }
    });

    const gridItems = document.querySelectorAll('.grid-item');
    let activeIndex = -1;

    function setActiveVideo(index) {
        if (index === activeIndex) return; // do nothing if the same video

        videos.forEach((video, i) => {
            const isActive = i === index;
            video.classList.toggle('active', isActive);
            if (isActive) {
                updateFooterText(video);
                // Optionally reset and play video here:
                // video.currentTime = 0;
                // video.play();
            } else {
                // Optionally pause and reset video here:
                // video.pause();
                // video.currentTime = 0;
            }
        });

        activeIndex = index;
    }

   mainContent = document.querySelector('.main-content');
  const slideBox = document.querySelector('.slide-box');
  const gridContainer = document.querySelector('.grid-container');

  if (mainContent) clampScroll(mainContent);
  if (slideBox) clampScroll(slideBox);
  if (gridContainer && gridContainer.scrollHeight > gridContainer.clientHeight) {
    clampScroll(gridContainer);
  }

});

// The rest of your iframe/sidebar code remains unchanged

const slideBox = document.querySelector('.slide-box');
const iframe = slideBox.querySelector('iframe');
const closeBtn = document.querySelector('.close-btn');

let currentFile = "";

closeBtn.addEventListener('click', () => {
    slideBox.classList.remove('show');
    iframe.style.opacity = 0;
});

document.querySelectorAll("#mobile-menu a").forEach(link => {
  link.addEventListener("click", () => {
    const menu = document.getElementById("mobile-menu");
    menu.classList.remove("show");
  });
});

function toggleMobileMenu() {
  const menu = document.getElementById("mobile-menu");
  menu.classList.toggle("show");
}
function setupSlideBoxLinks(selector) {
    const links = document.querySelectorAll(selector);
    const slideBox = document.querySelector('.slide-box');
    const iframe = slideBox.querySelector('iframe');
    const closeBtn = document.querySelector('.close-btn');

    links.forEach(link => {
        link.addEventListener('click', (e) => {
        iframe.style.opacity = 0;

            e.preventDefault();
            const file = link.getAttribute('data-file');

            // Hide mobile menu if present
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu) {
                mobileMenu.classList.remove('show');
            }

            if (slideBox.classList.contains('show') && currentFile === file) {
                // Just close if same file is already shown
                slideBox.classList.remove('show');
                iframe.style.opacity = 0;
                return;
            }

            if (!slideBox.classList.contains('show')) {
                slideBox.classList.add('show');
                        iframe.style.opacity = 0;
                currentFile = file;
                setTimeout(() => {
                    iframe.src = file;
                    iframe.style.opacity = 1;
                }, 500);
            } else {
                iframe.style.opacity = 0;
                iframe.addEventListener('transitionend', function handler() {
                    iframe.removeEventListener('transitionend', handler);
                    iframe.src = file;
                    currentFile = file;
                    setTimeout(() => iframe.style.opacity = 1, 50);
                });
            }
        });
    });

    if (closeBtn) {
        closeBtn.addEventListener('click', () => {
            iframe.style.opacity = 0;
            slideBox.classList.remove('show');
        });
    }
}

// Apply to both sidebar and mobile menu links
setupSlideBoxLinks('.sidebar-links a[data-file]');
setupSlideBoxLinks('.mobile-menu a[data-file]');
setupSlideBoxLinks('.footer-button[data-file]');

document.querySelectorAll('.grid-container img, .grid-container a').forEach(el => {
  el.addEventListener('dragstart', e => e.preventDefault());
});

document.querySelectorAll('.grid-item[data-file]').forEach(item => {
  item.addEventListener('click', e => {
    e.preventDefault();

    const slideBox = document.querySelector('.slide-box');
    const iframe = slideBox.querySelector('iframe');

    if(iframe)
    {
        iframe.style.opacity = 0;
    }

    const file = item.getAttribute('data-file');

    if (!slideBox || !iframe || !file) return;

    const closeBtn = slideBox.querySelector('.close-btn');

    // If already showing the same file, close it
    if (slideBox.classList.contains('show') && iframe.src.includes(file)) {
      slideBox.classList.remove('show');
      iframe.style.opacity = 0;

      return;
    }

    if (!slideBox.classList.contains('show')) {
      slideBox.classList.add('show');
      setTimeout(() => {
        iframe.src = file;
        iframe.style.opacity = 1;
      }, 500);
    } else {
      iframe.style.opacity = 0;
      iframe.addEventListener('transitionend', function handler() {
        iframe.removeEventListener('transitionend', handler);
        iframe.src = file;
        setTimeout(() => {
          iframe.style.opacity = 1;
        }, 50);
      });
    }
  });
});

function clampScroll(div) {
  div.addEventListener('scroll', () => {
    div.scrollTop = Math.max(1, Math.min(div.scrollTop, div.scrollHeight - div.clientHeight - 1));
  });
}

function clampScrollSmooth(div) {
  div.addEventListener('scroll', () => {
    const maxScroll = div.scrollHeight - div.clientHeight - 1;
    const clamped = Math.max(1, Math.min(div.scrollTop, maxScroll));

    // Only scroll if we need to clamp
    if (div.scrollTop !== clamped) {
      div.scrollTo({ top: clamped, behavior: 'smooth' });
    }
  });
}

</script>


<iframe src="resume.html" style="display:none;" id="preload1"></iframe>
<iframe src="coverletter.html" style="display:none;" id="preload2"></iframe>
</body>
</html>
