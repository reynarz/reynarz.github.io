<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shred Engine</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dosis&family=Raleway&display=swap" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" href="favicon.png">

  <!-- Styles -->
  <link rel="stylesheet" href="css/explore.css">
</head>
<body>
  <!-- Top Image -->
  <div class="hero-image overlay-strong">
    <img src="assets/images/explore-mino/hero6.png" alt="Broken Path Hero" loading="eager">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1>Mino's Adventure</h1>
      <p>Unity3D platformer, with a huge twist!</p>
      <a id="download-btn" class="hero-button-noInteract" download>In-Progress</a>
    </div>
  </div>

  <!-- Content Grid -->
  <div class="content-grid">
    <div class="grid-left">
      <!-- Images -->
      <img src="assets/images/explore-mino/show9.png" alt="Screenshot 2">
      
        
        
              <img src="assets/images/explore-mino/show3.png" alt="Screenshot 4">

      <img src="assets/images/explore-mino/show1.png" alt="Screenshot 1">
        <div class="media video" data-type="video" data-video-id="3_pLr8hs7MQ" aria-label="Play trailer">
        <img src="assets/images/explore-mino/show10.png" alt="Screenshot 3">
        <span class="play-badge" aria-hidden="true">▶</span>
      </div>
        
      <!-- Video tile (replace YOUTUBE_ID_HERE with your video ID, e.g. dQw4w9WgXcQ) -->
      

      <!-- You can add more videos by duplicating the block above and changing data-video-id -->
    </div>

    <div class="grid-right">
      <div class="block">
        <h2>ABOUT THE GAME</h2>
        <p>
          A small cat finds himself stranded after a storm wrecks his delivery ship, scattering packages across a mysterious land where entire villages are slowly sinking into the ground.
          To collect the packages, he must traverse a series of dangerous levels before they disappear forever.
        </p>
      </div>
      <div class="block">
        <h2>PLATFORM & DEVELOPMENT</h2>
        <p>
          Solo project developed with Unity3D over the course of two years, the game is designed for mobile devices, desktop platforms, and consoles.
          With simple controls and intuitive gameplay, it’s built to be accessible while offering deep exploration and challenge.
        </p>
      </div>
      <div class="block">
        <h2>TOOLS & CUSTOMIZATION</h2>
        <p>
          A set of tools has been crafted to streamline world creation and hand craft the camera paths for the levels.
          These tools allow rapid content development and quick iterations to test all the different environments.
        </p>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <span class="close-lightbox" role="button" aria-label="Close"></span>
    <span class="lightbox-prev" role="button" aria-label="Previous">&#10094;</span>
    <img id="lightbox-img" src="" alt="Expanded view">
    <!-- Video iframe -->
    <iframe
      id="lightbox-vid"
      src=""
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
      title="YouTube video"
    ></iframe>
    <span class="lightbox-next" role="button" aria-label="Next">&#10095;</span>
  </div>

  <div style="height: 20px;"></div>

  <!-- Script -->
  <script>
      window.addEventListener("message", (event) => {
  if (event.data.action === "stopVideo") {
    stopVideo();
  }
});
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxVid = document.getElementById('lightbox-vid');
  const closeBtn = document.querySelector('.close-lightbox');
  const nextBtn = document.querySelector('.lightbox-next');
  const prevBtn = document.querySelector('.lightbox-prev');

  // Collect media in DOM order (images + video tiles)
  const mediaNodes = Array.from(document.querySelectorAll('.grid-left > img, .grid-left > .media.video'));
  const media = mediaNodes.map(node => {
    if (node.tagName === 'IMG') {
      return { type: 'image', src: node.src };
    } else {
      return { type: 'video', id: node.dataset.videoId };
    }
  });

  let currentIndex = 0;

  function stopVideo() {
    if (!lightboxVid) return;
    if (lightboxVid.src) lightboxVid.src = ''; // reset src to stop playback
    lightboxVid.classList.remove('showing');
    lightboxVid.classList.add('hide');
    lightboxVid.style.display = 'none';
  }

  function showMedia(index) {
    if (media.length === 0) return;
    if (index < 0) index = media.length - 1;
    if (index >= media.length) index = 0;
    currentIndex = index;

    // Prepare swap
    lightboxImg.classList.add('hide');
    lightboxVid.classList.add('hide');
    lightboxImg.style.display = 'none';
    stopVideo();

    const item = media[currentIndex];

    if (item.type === 'image') {
      lightboxImg.src = item.src;
      lightboxImg.style.display = 'block';
      requestAnimationFrame(() => {
        lightboxImg.classList.remove('hide');
      });
    } else {
      const autoplayUrl = `https://www.youtube.com/embed/${item.id}?autoplay=1&rel=0&modestbranding=1`;
      lightboxVid.src = autoplayUrl;
      lightboxVid.style.display = 'block';
      requestAnimationFrame(() => {
        lightboxVid.classList.remove('hide');
        lightboxVid.classList.add('showing');
      });
    }
  }

  // Open lightbox
  mediaNodes.forEach((node, i) => {
    node.addEventListener('click', () => {
      currentIndex = i;
      lightbox.classList.add('show');
      lightbox.classList.remove('hide');
      document.body.classList.add('no-scroll'); // enable overflow hidden in CSS if you want lock
      showMedia(i);
      lightbox.setAttribute('aria-hidden', 'false');
    });
  });

  // Close lightbox
  function closeLightbox() {
    lightbox.classList.remove('show');
    lightbox.classList.add('hide');
    document.body.classList.remove('no-scroll');
    stopVideo();
    setTimeout(() => {
      lightbox.classList.remove('hide');
      lightbox.setAttribute('aria-hidden', 'true');
    }, 300);
  }

  closeBtn.addEventListener('click', closeLightbox);

  // Close on background click
  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) {
      closeLightbox();
    }
  });

  // Navigate
  nextBtn.addEventListener('click', () => showMedia(currentIndex + 1));
  prevBtn.addEventListener('click', () => showMedia(currentIndex - 1));

  // Keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    if (!lightbox.classList.contains('show')) return;
    if (e.key === 'Escape') {
      closeLightbox();
    } else if (e.key === 'ArrowRight') {
      showMedia(currentIndex + 1);
    } else if (e.key === 'ArrowLeft') {
      showMedia(currentIndex - 1);
    }
  });
  </script>
</body>
</html>
